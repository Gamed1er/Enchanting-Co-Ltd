effect give @s[nbt={SelectedItem:{components:{"minecraft:enchantments":{levels:{"enchantments:pickaxe/underground_miner":1}}}}}] haste 1 0
effect give @s[nbt={SelectedItem:{components:{"minecraft:enchantments":{levels:{"enchantments:pickaxe/underground_miner":2}}}}}] haste 1 1
effect give @s[nbt={SelectedItem:{components:{"minecraft:enchantments":{levels:{"enchantments:pickaxe/underground_miner":3}}}}}] haste 1 2
effect give @s[nbt={SelectedItem:{components:{"minecraft:enchantments":{levels:{"enchantments:pickaxe/underground_miner":4}}}}}] haste 1 3
effect give @s[nbt={SelectedItem:{components:{"minecraft:enchantments":{levels:{"enchantments:pickaxe/underground_miner":5}}}}}] haste 1 4

item replace entity @e[type=minecraft:villager,limit=1,sort=nearest,nbt={HandItems:[{id:"minecraft:totem_of_undying"}]}] weapon.mainhand with minecraft:totem_of_undying